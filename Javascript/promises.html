<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
</head>
<body>
    <h1>Promises</h1>
    <p>The solution to the callback hell is promises. A promise is a "Promise of code Execution." The Code either executes or fails, in bothe cases the subscriber will be notified.</p>

    <script>
        console.log('JS initialized');
        //Exmaple 1 - Promise
    //     let mypro = new Promise((resolve, reject) =>{
    //         m = Math.random()
    //         if(m>=0.5){

    //             console.log("This is first")
    //             setTimeout(() => {
    //                 console.log('second is running');
    //                 resolve("Value Thrown by Resolve")  
    //             }, 2000);
                
    //         }
    //         else{
    //             reject("Number is less. You are rejected")
    //         }

    //    })
    //    mypro.then((a)=>{
    //     console.log(a)
    //     console.log("Third this is the last");
    //     console.log("It is running step wise. no Asynchronous action inspite of using it");
        
    //    }).catch((a)=>{
    //     console.log(a)
    //    })

    //Exmaple 2

//   let ld1 = new Promise((resolve, reject) => {
//     console.log("LD1");
//     let a = document.createElement("script");
//     a.src = "factorial.js";

//     a.onload = () => resolve(a);
//     a.onerror = () => reject("Failed to load script");

//     document.head.append(a); // start loading
// });

// ld1.then((a) => {
//     console.log("Script Loaded Successfully");
//     console.log("script finished");
// }).catch((err) => {
//     console.log(err);
// });


//Attaching multiple handlers
// let promise = new Promise((resolve, reject) => {
//   setTimeout(() => resolve("Done!"), 1000);
// });

// // First handler
// promise.then((msg) => {
//   console.log("Handler 1:", msg);
// });

// // Second handler
// promise.then((msg) => {
//   console.log("Handler 2:", msg.toUpperCase());
// });

//Promises API
// let fetchData = new Promise((resolve, reject) => {
//     setTimeout(() => {
//         resolve("Data loaded");
//     }, 1000);
// });

// fetchData
//     .then(data => console.log(data))     // "Data loaded"
//     .catch(err => console.log(err))      // Only if error
//     .finally(() => console.log("Done")); // Always runs


//Promise.all()
// let p1 = Promise.resolve("First");
// let p2 = Promise.resolve("Second");

// Promise.all([p1,p15, p2]).then(results => {
//     console.log(results); // ["First", "Second"]
// });

// promise.allsettled()
// let p1 = Promise.resolve("Success 1");
// let p2 = Promise.reject("Error 2");
// let p3 = Promise.resolve("Success 3");

// Promise.allSettled([p1, p2, p3]).then(results => {
//     console.log(results);
// });

// promise.any()
// let p1 = Promise.reject("Error 1");
// let p2 = Promise.reject("Error 2");
// let p3 = Promise.resolve("Success 3");

// Promise.any([p1, p3, p2]).then(result => {
//     console.log(result); // "Success 3"
// }).catch(err => {
//     console.log(err); // Only if all promises failed
// });

//Promise.race()
// let p1 = new Promise(resolve => setTimeout(() => resolve("First"), 100));
// let p2 = new Promise(resolve => setTimeout(() => resolve("Second"), 50));

// Promise.race([p1, p2]).then(result => {
//     console.log(result); // "Second"
// });








    </script>

</body>
</html>